- title 'mintt: admin | Messages'
.text
  %h3= "Messages : #{smart_objects_objects_displayed_range(@messages)} of #{smart_objects_count(@messages)}"
  
  .actions_right= link_to('Go to Trash', trashs_admin_messages_path)
  
  %table
    - 5.times do
      %col{ :class => "even" }
    %tr
      %th.icon_centered= link_to image_tag("/images/admin/unread_label_icon.png", :alt => "Unread?"), admin_messages_path(sort_parameters('read_at'))
      %th.icon_centered= link_to image_tag("/images/admin/replied_label_icon.png", :alt => "Replied?"), admin_messages_path(sort_parameters('replied_at'))
      %th= link_to "From", admin_messages_path(sort_parameters('sender_name'))
      %th= link_to "Date Received", admin_messages_path(sort_parameters('created_at'))
      %th
      
    - @messages.each do |message|
      %tr[message]{ :class => cycle("", "alt") }
        %td.icon_centered
          %input{ :type => "hidden", :value => admin_message_path(message) }
          - if message.unread?
            = image_tag("/images/admin/unread_icon.png", :alt => "Unread")
        %td.icon_centered
          - if message.replied?
            = image_tag("/images/admin/replied_icon.png", :alt => "Replied")
        %td.from
          %h4= message_sender_name_with_email_and_mailto(message)
          %p.excerpt= truncate message.content, :length => 160
        -#%td= link_to(words_count(message.content), admin_message_path(message))
        %td.datetime
          %span.date= sexy_date(message.created_at)
          %span.time= sexy_time(message.created_at)
        %td
          = button_to("trash", trash_admin_message_path(message), :method => :put, :id => "trash_message_#{message.id}", :class => "button delete")
  
  - unless params.key? :all
    = will_paginate @messages
    = link_to "View all", admin_messages_path(:all => true)
  - else
    = link_to "View with paginate", admin_messages_path